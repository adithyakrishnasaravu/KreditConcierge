<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Card Concierge</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,500;9..144,700&family=Manrope:wght@500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="grid-bg"></div>

    <main class="app">
      <!-- Section 1: Hero -->
      <header class="hero">
        <p class="eyebrow">Card Concierge</p>
        <h1>One place to handle credit card issues</h1>
      </header>

      <!-- Section 2: How It Works -->
      <section class="how-it-works">
        <div class="explainer-card">
          <div class="explainer-icon">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <rect x="2" y="5" width="20" height="14" rx="2"/>
              <line x1="2" y1="10" x2="22" y2="10"/>
            </svg>
          </div>
          <h3>Link Your Card</h3>
          <p>Connect your credit card and select the provider</p>
        </div>
        <div class="explainer-card">
          <div class="explainer-icon">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
              <line x1="12" y1="19" x2="12" y2="23"/>
              <line x1="8" y1="23" x2="16" y2="23"/>
            </svg>
          </div>
          <h3>Describe the Issue</h3>
          <p>Record or type what happened with your card</p>
        </div>
        <div class="explainer-card">
          <div class="explainer-icon">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
          </div>
          <h3>We Solve It</h3>
          <p>Our AI agent calls the card company and resolves it</p>
        </div>
      </section>

      <!-- Section 3: Onboarding Flow -->
      <section class="onboarding">

        <!-- Step 1: Link your card -->
        <div class="step-card" id="step1">
          <div class="step-header">
            <span class="step-number">1</span>
            <h2>Link your card</h2>
          </div>
          <p>Connect and view all your cards before starting a case.</p>

          <button class="btn btn-primary" id="connectCardsBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="2" y="5" width="20" height="14" rx="2"/>
              <line x1="2" y1="10" x2="22" y2="10"/>
            </svg>
            Connect All Cards
          </button>

          <div id="cardTiles" class="card-tiles"></div>

          <label id="cardSelectLabel" style="display:none;">
            Select a card
            <select id="cardSelect" disabled>
              <option value="">Connect cards first</option>
            </select>
          </label>

          <details class="settings-toggle">
            <summary>Settings</summary>
            <div class="settings-body">
              <label>
                API Base URL
                <input id="baseUrl" placeholder="Auto-detected" />
              </label>
              <label>
                x-vapi-secret
                <input id="secret" placeholder="Paste VAPI_WEBHOOK_SECRET" />
              </label>
              <label>
                Customer ID
                <input id="customerId" value="cust_001" />
              </label>
              <button class="btn btn-secondary" id="healthBtn">Health Check</button>
              <pre id="healthOutput" class="settings-output"></pre>
            </div>
          </details>
        </div>

        <!-- Step 2: Record the issue -->
        <div class="step-card step-locked" id="step2">
          <div class="step-header">
            <span class="step-number">2</span>
            <h2>Record the issue</h2>
          </div>
          <p>Describe the problem by recording audio or typing a transcript.</p>

          <label>
            Phone number to call
            <input id="callToNumber" placeholder="+1XXXXXXXXXX" />
          </label>

          <div class="record-row">
            <button class="btn btn-secondary" id="startRecording">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
              </svg>
              Start Recording
            </button>
            <button class="btn btn-secondary" id="stopRecording">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="6" y="6" width="12" height="12" rx="1"/>
              </svg>
              Stop Recording
            </button>
            <button class="btn btn-danger" id="deleteRecording" style="display:none;">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
              </svg>
              Delete Recording
            </button>
          </div>

          <div id="recordStatus" class="record-status">Not recording</div>

          <label>
            Transcript
            <textarea id="transcript" placeholder="Record audio above or type your issue here..."></textarea>
          </label>
        </div>

        <!-- Step 3: Solve -->
        <div class="step-card step-locked" id="step3">
          <div class="step-header">
            <span class="step-number">3</span>
            <h2>Solve</h2>
          </div>
          <p>Our AI agent will call the card company and resolve your issue.</p>

          <button class="btn btn-primary btn-solve" id="solveBtn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            Solve
          </button>

          <div id="resultPanel" class="result-panel" style="display:none;"></div>
        </div>

      </section>

      <!-- Section 4: Outstanding Issues -->
      <section class="outstanding-section">
        <h2>Outstanding Issues</h2>
        <div id="issuesList" class="issues">
          <p class="empty">No issues yet.</p>
        </div>
      </section>
    </main>

    <script src="/app.js" type="module"></script>
  </body>
</html>
